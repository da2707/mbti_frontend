{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hyyyyjin/Documents/GitHub/mbti_frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hyyyyjin/Documents/GitHub/mbti_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hyyyyjin/Documents/GitHub/mbti_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{useMediaQuery}from'react-responsive';import{useLocation,Link,Route,BrowserRouter as Router}from'react-router-dom';import'../App.css';import Avatar from'react-avatar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MoreShare(_ref){var match=_ref.match;var _useLocation=useLocation(),pathname=_useLocation.pathname;useEffect(function(){window.scrollTo(0,0);},[pathname]);var location=useLocation();var moreInputData=location.state;console.log(\"더보기로 넘어온 데이터 :: \"+JSON.stringify(moreInputData));var _useState=useState(null),_useState2=_slicedToArray(_useState,2),details=_useState2[0],setDetails=_useState2[1];var getUserGeolocationDetails=function getUserGeolocationDetails(e,name){var completed=false;function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('https://geolocation-db.com/json/0f761a30-fe14-11e9-b59f-e53803842572').then(function(response){if(!completed){console.log(\"name :: \"+JSON.stringify(name));console.log(\"name.item1 :: \"+name.name.item_1);var Share={mbti_id:\"000001\",item_1:name.name.item_1,item_2:name.name.item_2,type:\"like\",ip_addr:response.data.IPv4,mbti_type:moreInputData.my_type,gender:moreInputData.gender};console.log(\"share \"+JSON.stringify(Share));axios.post('https://1.238.222.186:9999/mbti/share',Share).then(function(response){console.log(\"share \"+JSON.stringify(Share));console.log(response);});setDetails(response.data);console.log(response.data);//console.log(\"geoLoc :: \" + JSON.stringify(details));\n//console.log(\"IPv4 :: \" + details.IPv4);\n}});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){completed=true;};};var isPc=useMediaQuery({query:\"(min-width:1024px)\"});var isTablet=useMediaQuery({query:\"(min-width:768px) and (max-width:1023px)\"});var isMobile=useMediaQuery({query:\"(max-width:767px)\"});var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),testData=_useState4[0],setTestData=_useState4[1];useEffect(function(){var completed=false;function fetchData(){return _fetchData2.apply(this,arguments);}function _fetchData2(){_fetchData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('https://1.238.222.186:9999/mbti/query/similar?mbti_id=000001&mbti_type='+match.params.mbti+'&gender='+match.params.gender);case 2:result=_context2.sent;console.log(result.data);if(!completed)setTestData(result.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchData2.apply(this,arguments);}fetchData();return function(){completed=true;};},[]);var home=\"https://1.238.222.186:9999/mbti\";var nameList=testData.similarRanking&&testData.similarRanking.map(function(name){return/*#__PURE__*/_jsxs(\"div\",{className:\"more\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"moreNumber\",children:name.rank}),/*#__PURE__*/_jsx(\"div\",{className:\"moreAvatar\",children:/*#__PURE__*/_jsx(Avatar,{size:\"70\",round:\"100px\",\"facebook-id\":\"invalidfacebookusername\",src:home+name.img_url})}),/*#__PURE__*/_jsxs(\"div\",{className:\"moreText\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"moreIdolName\",children:[name.item_1,\" \",name.item_2]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"moreLike\",onClick:function onClick(e){getUserGeolocationDetails(e,{name:name});},children:[\"\\u2764 \\uC88B\\uC544\\uC694 \",name.like,\"\\uAC1C\"]})]})]});});return/*#__PURE__*/_jsx(\"div\",{className:\"result\",children:isMobile&&/*#__PURE__*/_jsxs(\"div\",{className:\"bgMbMore\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"moreTitle\",children:\"\\uB098\\uC640 \\uC5B4\\uC6B8\\uB9AC\\uB294 \\uC544\\uC774\\uB3CC\\uC740\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"moreCount\",children:[testData.similar_count,\"\\uBA85 \\uC785\\uB2C8\\uB2E4.\"]}),nameList,/*#__PURE__*/_jsx(\"div\",{className:\"shareTwitterBtn\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"shareTwitter\",children:\"\\uD2B8\\uC704\\uD130\\uB85C \\uACF5\\uC720\\uD558\\uAE30\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"shareKakaoBtn\"}),/*#__PURE__*/_jsx(\"div\",{className:\"shareLinkBtn\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"shareLink\",children:\"\\uB9C1\\uD06C\\uBCF5\\uC0AC\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"shareAdBtn\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"shareAd\",children:\"\\uAD11\\uACE0\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"shareReStartBtn\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"reStart\",children:\"\\uB2E4\\uC2DC \\uD14C\\uC2A4\\uD2B8 \\uD558\\uAE30\"})})})]})});}export default MoreShare;","map":{"version":3,"sources":["/Users/hyyyyjin/Documents/GitHub/mbti_frontend/src/page/MoreShare.js"],"names":["React","useState","useEffect","axios","useMediaQuery","useLocation","Link","Route","BrowserRouter","Router","Avatar","MoreShare","match","pathname","window","scrollTo","location","moreInputData","state","console","log","JSON","stringify","details","setDetails","getUserGeolocationDetails","e","name","completed","fetchData","post","then","response","item_1","Share","mbti_id","item_2","type","ip_addr","data","IPv4","mbti_type","my_type","gender","isPc","query","isTablet","isMobile","testData","setTestData","get","params","mbti","result","home","nameList","similarRanking","map","rank","img_url","like","similar_count"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'; \nimport axios from 'axios';\nimport { useMediaQuery } from 'react-responsive';\nimport { useLocation, Link, Route, BrowserRouter as Router } from 'react-router-dom';\nimport '../App.css';\nimport Avatar from 'react-avatar';\n\nfunction MoreShare ({match}) {\n\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n\n  const location = useLocation();\n  const moreInputData = location.state;\n  console.log(\"더보기로 넘어온 데이터 :: \" + JSON.stringify(moreInputData));    \n\n  const [details, setDetails] = useState(null);\n  \n  const getUserGeolocationDetails = (e,name) => {\n    \n    let completed = false;\n    async function fetchData(){\n      await axios.post('https://geolocation-db.com/json/0f761a30-fe14-11e9-b59f-e53803842572')\n      .then((response)=>{\n      if(!completed){\n        \n        console.log(\"name :: \" + JSON.stringify(name));\n        console.log(\"name.item1 :: \" + name.name.item_1);\n        \n        const Share = {\n          mbti_id : \"000001\",\n          item_1 : name.name.item_1,\n          item_2 : name.name.item_2,\n          type : \"like\",\n          ip_addr : response.data.IPv4,\n          mbti_type : moreInputData.my_type,\n          gender : moreInputData.gender\n        };\n\n        console.log(\"share \" + JSON.stringify(Share));\n        \n        axios.post('https://1.238.222.186:9999/mbti/share',\n        Share\n        ).then((response)=>{\n          console.log(\"share \" + JSON.stringify(Share));\n          console.log(response);\n        });\n\n        setDetails(response.data);  \n        console.log(response.data);\n        //console.log(\"geoLoc :: \" + JSON.stringify(details));\n        //console.log(\"IPv4 :: \" + details.IPv4);\n         }\n      });\n    }\n    fetchData();\n    return () =>{\n      completed = true;\n    };\n\n  };  \n\n      const isPc = useMediaQuery({\n        query : \"(min-width:1024px)\"\n      });\n      const isTablet = useMediaQuery({\n        query : \"(min-width:768px) and (max-width:1023px)\"\n      });\n      const isMobile = useMediaQuery({\n        query : \"(max-width:767px)\"\n      });\n      \n      const [testData, setTestData] = useState([]);\n      useEffect(() => {\n        let completed = false;\n        async function fetchData(){\n          const result = await axios.get('https://1.238.222.186:9999/mbti/query/similar?mbti_id=000001&mbti_type='+match.params.mbti+'&gender='+match.params.gender);\n          console.log(result.data);\n        if(!completed) setTestData(result.data);\n        }\n        fetchData();\n        return () => {\n          completed = true;\n        };\n      },[]);\n\n      let home = \"https://1.238.222.186:9999/mbti\";\n      \n      const nameList = testData.similarRanking && testData.similarRanking.map(name => \n      <div className=\"more\">\n        <h1 className=\"moreNumber\">{name.rank}</h1>\n        <div className=\"moreAvatar\">\n          <Avatar size=\"70\"\n                  round=\"100px\"\n                  facebook-id=\"invalidfacebookusername\"\n                  src={home + name.img_url}/>\n        </div>\n        <div className=\"moreText\">\n          <h1 className=\"moreIdolName\">{name.item_1} {name.item_2}</h1>\n          <h1 className=\"moreLike\" onClick={(e) => {getUserGeolocationDetails(e,{name})}}>❤ 좋아요 {name.like}개</h1>\n          {/*<h1 className=\"moreShare\">💌 공유하기 {name.shared}회</h1>*/}\n        </div>  \n      </div>\n      );\n      \n      \n\n    return (\n        <div className=\"result\">\n        {isMobile &&  \n          <div className=\"bgMbMore\">\n            <h1 className=\"moreTitle\">나와 어울리는 아이돌은</h1>\n            <h1 className=\"moreCount\">{testData.similar_count}명 입니다.</h1>\n            {nameList}\n            <div className=\"shareTwitterBtn\">\n              <h1 className=\"shareTwitter\">트위터로 공유하기</h1>\n            </div>\n            <div className=\"shareKakaoBtn\">\n            {/*<KakaoLinkDefault\n              className=\"template\"\n              template={{\n                objectType: \"feed\",\n                content: {\n                  title: NewTest.match_type,\n                  description: \"#케익 #딸기 #삼평동 #카페 #분위기 #소개팅\",\n                  imageUrl:\n                    \"../img/start.png\",\n                  link: {\n                    mobileWebUrl: result + \"/\" + NewTest.gender + \"/\" + NewTest.my_type,\n                    webUrl: result + \"/\" + NewTest.gender + \"/\" + NewTest.my_type,\n                  },\n                },\n                social: {\n                  likeCount: 286,\n                  commentCount: 45,\n                  sharedCount: 845,\n                },\n                buttons: [\n                  {\n                    title: \"웹으로 보기\",\n                    link: {\n                      mobileWebUrl: result + \"/\" + NewTest.gender + \"/\" + NewTest.my_type,\n                      webUrl: result + \"/\" + NewTest.gender + \"/\" + NewTest.my_type,\n                    },\n                  },\n                  {\n                    title: \"앱으로 보기\",\n                    link: {\n                      mobileWebUrl: result + \"/\" + NewTest.gender + \"/\" + NewTest.my_type,\n                      webUrl: result + \"/\" + NewTest.gender + \"/\" + NewTest.my_type,\n                    },\n                  },\n                ],\n              }}\n              jsKey={\"b9fb41bcc6b6ab2dea9c74602d2efcf3\"}\n              >\n              <h1 className=\"shareKakao\">카카오로 공유하기</h1>\n            </KakaoLinkDefault>*/}\n            </div>\n            <div className=\"shareLinkBtn\">\n              <h1 className=\"shareLink\">링크복사</h1>\n            </div>\n            <div className=\"shareAdBtn\">\n              <h1 className=\"shareAd\">광고</h1>\n            </div>\n            <div className=\"shareReStartBtn\">\n              <Link to =\"/\">\n              <h1 className=\"reStart\">다시 테스트 하기</h1>\n              </Link>\n            </div>\n          </div>}\n      </div>\n    );\n\n}\n\nexport default MoreShare;"]},"metadata":{},"sourceType":"module"}